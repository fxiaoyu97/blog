(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{375:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"springboot日期参数前后台转换问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot日期参数前后台转换问题"}},[t._v("#")]),t._v(" springboot日期参数前后台转换问题")]),t._v(" "),s("p",[t._v("客户端往服务端请求的过程中，传输数据一般为json格式，如果服务端的时间属性设置为date类型，那么就会抛出异常："),s("code",[t._v("Failed to convert property value of type 'java.lang.String' to required type 'java.util.Date'")])]),t._v(" "),s("h2",{attrs:{id:"客户端日期字符串转换成date类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端日期字符串转换成date类型"}},[t._v("#")]),t._v(" 客户端日期字符串转换成date类型")]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("@DateTimeFormat")]),t._v("注解在实体类的字段上。时间的格式可以十分灵活的定义，但是每个需要转换的字段都要家注解。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pattern写时间格式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@DateTimeFormat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pattern "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd HH:mm:ss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),t._v(" createTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h2",{attrs:{id:"服务器端返回给客户端的指定格式日期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器端返回给客户端的指定格式日期"}},[t._v("#")]),t._v(" 服务器端返回给客户端的指定格式日期")]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("@JsonFormat")]),t._v("在实体类字段上。时间格式也可以灵活的设置")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@DateTimeFormat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pattern "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd HH:mm:ss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@JsonFormat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pattern "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd HH:mm:ss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timezone "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GMT+8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),t._v(" createTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("也可以在yml文件中进行配置")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jackson")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("date-format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yyyy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("MM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dd HH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("ss\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("time-zone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GMT+8\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("hr"),t._v(" "),s("p",[t._v("两个注解可以同时在一个属性上使用，只是控制的范围不一样，两个注解所属的包也是不一样的。需要注意两点：")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("@JsonFormat")]),t._v("控制服务端到客户端的时间格式")])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("@DataFormat")]),t._v("控制客户端到服务端的时间格式")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);