(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{348:function(s,t,a){s.exports=a.p+"assets/img/1525675168152.db5f942c.png"},376:function(s,t,a){"use strict";a.r(t);var e=a(42),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"zuul网关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zuul网关"}},[s._v("#")]),s._v(" zuul网关")]),s._v(" "),e("p",[e("img",{attrs:{src:a(348),alt:"1525675168152"}})]),s._v(" "),e("h2",{attrs:{id:"基本映射原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本映射原则"}},[s._v("#")]),s._v(" 基本映射原则")]),s._v(" "),e("p",[s._v("我们将符合"),e("code",[s._v("path")]),s._v(" 规则的一切请求，都代理到 "),e("code",[s._v("url")]),s._v("参数指定的地址。将 "),e("code",[s._v("/user-service/**")]),s._v("开头的请求，代理到http://127.0.0.1:8081")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user-service")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是路由id，随意写")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service/"),e("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是映射路径")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//127.0.0.1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 映射路径对应的实际url地址")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"服务名代替url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务名代替url"}},[s._v("#")]),s._v(" 服务名代替URL")]),s._v(" "),e("p",[s._v("注册到注册中心， 拉取服务列表，使用服务名。")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user-service")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是路由id，随意写")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service/"),e("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是映射路径")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定服务名称")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"简化的路由配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简化的路由配置"}},[s._v("#")]),s._v(" 简化的路由配置")]),s._v(" "),e("p",[s._v("大多数情况下，我们的"),e("code",[s._v("<route>")]),s._v("路由名称往往和 服务名会写成一样的。因此Zuul就提供了一种简化的配置语法："),e("code",[s._v("zuul.routes.<serviceId>=<path>")])]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user-service")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service/"),e("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是映射路径")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"默认的路由规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#默认的路由规则"}},[s._v("#")]),s._v(" 默认的路由规则")]),s._v(" "),e("p",[s._v("在使用Zuul的过程中，上面讲述的规则已经大大的简化了配置项。但是当服务较多时，配置也是比较繁琐的。因此Zuul就指定了默认的路由规则：")]),s._v(" "),e("ul",[e("li",[s._v("默认情况下，一切服务的映射路径就是服务名本身。\n"),e("ul",[e("li",[s._v("例如服务名为："),e("code",[s._v("user-service")]),s._v("，则默认的映射路径就是："),e("code",[s._v("/user-service/**")])])])])]),s._v(" "),e("p",[s._v("啥都不写，就是默认第三种配置，以服务名为主")]),s._v(" "),e("h2",{attrs:{id:"路由前缀"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由前缀"}},[s._v("#")]),s._v(" 路由前缀")]),s._v(" "),e("p",[s._v("配置示例：")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("prefix")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /api "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加路由前缀")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user-service")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是路由id，随意写")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service/"),e("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是映射路径")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("service-id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定服务名称")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("我们通过"),e("code",[s._v("zuul.prefix=/api")]),s._v("来指定了路由的前缀，这样在发起请求时，路径就要以/api开头。")]),s._v(" "),e("p",[s._v("路径"),e("code",[s._v("/api/user-service/user/1")]),s._v("将会被代理到"),e("code",[s._v("/user-service/user/1")])])])}),[],!1,null,null,null);t.default=n.exports}}]);